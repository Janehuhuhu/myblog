<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue åŸºç¡€ | å°ç”Ÿå¤©åœ°</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/logo.jpeg">
    <meta name="description" content="å°ç”Ÿå­¦ä¹ å¤©åœ°">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.a280ad29.js" as="script"><link rel="preload" href="/assets/js/2.fb79666b.js" as="script"><link rel="preload" href="/assets/js/40.04ca984c.js" as="script"><link rel="prefetch" href="/assets/js/10.bb154cb0.js"><link rel="prefetch" href="/assets/js/11.daa4d740.js"><link rel="prefetch" href="/assets/js/12.7411366b.js"><link rel="prefetch" href="/assets/js/13.ad26b898.js"><link rel="prefetch" href="/assets/js/14.274e4703.js"><link rel="prefetch" href="/assets/js/15.cf27d9ea.js"><link rel="prefetch" href="/assets/js/16.2a9e14ef.js"><link rel="prefetch" href="/assets/js/17.d39df2ac.js"><link rel="prefetch" href="/assets/js/18.6517bc79.js"><link rel="prefetch" href="/assets/js/19.6285898a.js"><link rel="prefetch" href="/assets/js/20.5d706858.js"><link rel="prefetch" href="/assets/js/21.d1d4d502.js"><link rel="prefetch" href="/assets/js/22.699f6b0f.js"><link rel="prefetch" href="/assets/js/23.3dd9099b.js"><link rel="prefetch" href="/assets/js/24.274c37c4.js"><link rel="prefetch" href="/assets/js/25.ec3997de.js"><link rel="prefetch" href="/assets/js/26.57c0a967.js"><link rel="prefetch" href="/assets/js/27.5ae07707.js"><link rel="prefetch" href="/assets/js/28.654e66eb.js"><link rel="prefetch" href="/assets/js/29.0201f085.js"><link rel="prefetch" href="/assets/js/3.757746cd.js"><link rel="prefetch" href="/assets/js/30.36a739f1.js"><link rel="prefetch" href="/assets/js/31.e41a663e.js"><link rel="prefetch" href="/assets/js/32.3c7224c6.js"><link rel="prefetch" href="/assets/js/33.e7e98d9b.js"><link rel="prefetch" href="/assets/js/34.40371dde.js"><link rel="prefetch" href="/assets/js/35.cacd26c6.js"><link rel="prefetch" href="/assets/js/36.4b933532.js"><link rel="prefetch" href="/assets/js/37.bb8fba66.js"><link rel="prefetch" href="/assets/js/38.c4f932ba.js"><link rel="prefetch" href="/assets/js/39.74dd58b4.js"><link rel="prefetch" href="/assets/js/4.26d385be.js"><link rel="prefetch" href="/assets/js/41.b98bbcdf.js"><link rel="prefetch" href="/assets/js/42.34a5e582.js"><link rel="prefetch" href="/assets/js/5.7348d45e.js"><link rel="prefetch" href="/assets/js/6.96312c4f.js"><link rel="prefetch" href="/assets/js/7.27e03c61.js"><link rel="prefetch" href="/assets/js/8.7e1b958f.js"><link rel="prefetch" href="/assets/js/9.f23b4cca.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpeg" alt="å°ç”Ÿå¤©åœ°" class="logo"> <span class="site-name can-hide">å°ç”Ÿå¤©åœ°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="https://github.com/Janehuhuhu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="https://github.com/Janehuhuhu" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html" class="active sidebar-link">vue åŸºç¡€</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html#vue-åŸºç¡€" class="sidebar-link">vue åŸºç¡€</a></li><li class="sidebar-sub-header"><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html#process-argv" class="sidebar-link">process.argv</a></li><li class="sidebar-sub-header"><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html#å¯å¤ç”¨å’Œç»„åˆ" class="sidebar-link">å¯å¤ç”¨å’Œç»„åˆ</a></li><li class="sidebar-sub-header"><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html#ç»„ä»¶åº“" class="sidebar-link">ç»„ä»¶åº“</a></li><li class="sidebar-sub-header"><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html#generatorapi" class="sidebar-link">GeneratorAPI</a></li><li class="sidebar-sub-header"><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html#history-å’Œ-hash-æ¨¡å¼" class="sidebar-link">history å’Œ hash æ¨¡å¼</a></li><li class="sidebar-sub-header"><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html#browser-module-main-å­—æ®µ" class="sidebar-link">browserï¼Œmoduleï¼Œmain å­—æ®µ</a></li><li class="sidebar-sub-header"><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html#pluginapi" class="sidebar-link">pluginAPI</a></li><li class="sidebar-sub-header"><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html#loadmodule" class="sidebar-link">loadmodule</a></li><li class="sidebar-sub-header"><a href="/vue/vueä½¿ç”¨/vueåŸºç¡€.html#é…ç½®æ–‡ä»¶" class="sidebar-link">é…ç½®æ–‡ä»¶</a></li></ul></li><li><a href="/vue/vueæºç /åŒå‘ç»‘å®š.html" class="sidebar-link">vue æºç </a></li><li><a href="/vue/å¸¸è§é—®é¢˜/å¤§å°å†™.html" class="sidebar-link">FAQ</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="vue-åŸºç¡€"><a href="#vue-åŸºç¡€" class="header-anchor">#</a> vue åŸºç¡€</h2> <p><code>vue</code> åŸºç¡€çŸ¥è¯†</p> <h2 id="process-argv"><a href="#process-argv" class="header-anchor">#</a> process.argv</h2> <p>å‘½ä»¤è¡Œ <strong>node '/Users/jane/Desktop/test-01/sourcemap-hj0/a.js' --a b c</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ‰§è¡Œ</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>

<span class="token comment">// ç»“æœ</span>
<span class="token punctuation">[</span>
  <span class="token string">'/Users/jane/.nvm/versions/node/v14.17.4/bin/node'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/jane/Desktop/test-01/sourcemap-hj0/a.js'</span><span class="token punctuation">,</span>
  <span class="token string">'--a'</span><span class="token punctuation">,</span>
  <span class="token string">'b'</span><span class="token punctuation">,</span>
  <span class="token string">'c'</span>
<span class="token punctuation">]</span>
</code></pre></div><p>ä½¿ç”¨ <em>minimist</em> æ ¼å¼åŒ–å‚æ•°</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ‰§è¡Œ</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">minimist</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// ç»“æœ</span>
<span class="token punctuation">{</span>
  _<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'/Users/jane/.nvm/versions/node/v14.17.4/bin/node'</span><span class="token punctuation">,</span>
    <span class="token string">'/Users/jane/Desktop/test-01/sourcemap-hj0/a.js'</span><span class="token punctuation">,</span>
    <span class="token string">'c'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  a<span class="token operator">:</span> <span class="token string">'b'</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:100px;"></div> <h2 id="å¯å¤ç”¨å’Œç»„åˆ"><a href="#å¯å¤ç”¨å’Œç»„åˆ" class="header-anchor">#</a> å¯å¤ç”¨å’Œç»„åˆ</h2> <h3 id="vca"><a href="#vca" class="header-anchor">#</a> VCA</h3> <h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h4> <p>å°†åŒä¸€ä¸ªé€»è¾‘å…³æ³¨ç‚¹ç›¸å…³ä»£ç æ”¶é›†åœ¨ä¸€èµ·ï¼Œå¯¹äºç»„ç»‡å¤§å‹é¡¹ç›®ä»£ç ä¼šéå¸¸å‹å¥½ã€‚é€šè¿‡ <code>VCA</code> è¿™ç§æ–¹å¼å¯ä»¥è¿›è¡Œä»£ç çš„å¤ç”¨ <a href="https://juejin.cn/post/6850418114111537159" target="_blank" rel="noopener noreferrer">VCAæ‰«ç›²<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p><div style="margin-top:30px;"></div><p></p> <h4 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="header-anchor">#</a> ç”¨æ³•</h4> <p>å¯ä»¥çœ‹åˆ°ï¼Œå†™å‡ºæ¥çš„å°±åƒä¸€ä¸ªå‡½æ•°ä¼¼çš„ï¼Œç„¶ååœ¨ç»„ä»¶ä¸­è°ƒç”¨</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/composables/useUserRepositories.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchUserRepositories <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api/repositories'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">useUserRepositories</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> repositories <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getUserRepositories</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUserRepositories</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">onMounted</span><span class="token punctuation">(</span>getUserRepositories<span class="token punctuation">)</span>
  <span class="token function">watch</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> getUserRepositories<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    repositories<span class="token punctuation">,</span>
    getUserRepositories
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/components/UserRepositories.vue</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> useUserRepositories <span class="token keyword">from</span> <span class="token string">'@/composables/useUserRepositories'</span>
<span class="token keyword">import</span> useRepositoryNameSearch <span class="token keyword">from</span> <span class="token string">'@/composables/useRepositoryNameSearch'</span>
<span class="token keyword">import</span> useRepositoryFilters <span class="token keyword">from</span> <span class="token string">'@/composables/useRepositoryFilters'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span> RepositoriesFilters<span class="token punctuation">,</span> RepositoriesSortBy<span class="token punctuation">,</span> RepositoriesList <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    user<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      required<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> repositories<span class="token punctuation">,</span> getUserRepositories <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useUserRepositories</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      searchQuery<span class="token punctuation">,</span>
      repositoriesMatchingSearchQuery
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRepositoryNameSearch</span><span class="token punctuation">(</span>repositories<span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      filters<span class="token punctuation">,</span>
      updateFilters<span class="token punctuation">,</span>
      filteredRepositories
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRepositoryFilters</span><span class="token punctuation">(</span>repositoriesMatchingSearchQuery<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// å› ä¸ºæˆ‘ä»¬å¹¶ä¸å…³å¿ƒæœªç»è¿‡æ»¤çš„ä»“åº“</span>
      <span class="token comment">// æˆ‘ä»¬å¯ä»¥åœ¨ `repositories` åç§°ä¸‹æš´éœ²è¿‡æ»¤åçš„ç»“æœ</span>
      repositories<span class="token operator">:</span> filteredRepositories<span class="token punctuation">,</span>
      getUserRepositories<span class="token punctuation">,</span>
      searchQuery<span class="token punctuation">,</span>
      filters<span class="token punctuation">,</span>
      updateFilters
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:50px;"></div> <h3 id="å‡½æ•°å¼ç»„ä»¶"><a href="#å‡½æ•°å¼ç»„ä»¶" class="header-anchor">#</a> å‡½æ•°å¼ç»„ä»¶</h3> <h4 id="ç®€ä»‹-2"><a href="#ç®€ä»‹-2" class="header-anchor">#</a> ç®€ä»‹</h4> <p>å‡½æ•°å¼ç»„ä»¶æ˜¯è‡ªèº«æ²¡æœ‰ä»»ä½•çŠ¶æ€çš„ç»„ä»¶çš„å¦ä¸€ç§å½¢å¼ã€‚å®ƒä»¬åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ä¸ä¼šåˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œå¹¶è·³è¿‡å¸¸è§„çš„ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€‚å¯ä»¥æŠŠå‡½æ•°å¼ç»„ä»¶æƒ³åƒæˆç»„ä»¶é‡Œçš„ä¸€ä¸ªå‡½æ•°ï¼Œå…¥å‚æ˜¯æ¸²æŸ“ä¸Šä¸‹æ–‡(render context)ï¼Œè¿”å›å€¼æ˜¯æ¸²æŸ“å¥½çš„ <code>HTML</code><a href="https://v3.cn.vuejs.org/guide/render-function.html#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">å‡½æ•°å¼ç»„ä»¶æ‰«ç›²<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p><div style="margin-top:30px;"></div><p></p> <h4 id="ç”¨æ³•-2"><a href="#ç”¨æ³•-2" class="header-anchor">#</a> ç”¨æ³•</h4> <p><a href="https://v3.cn.vuejs.org/guide/migration/functional-components.html#%E6%A6%82%E8%A7%88" target="_blank" rel="noopener noreferrer">å…¶ä»–ç”¨æ³•<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Vue 2 å‡½æ•°å¼ç»„ä»¶ç¤ºä¾‹ xxx.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  functional<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'level'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">h<span class="token punctuation">,</span> <span class="token punctuation">{</span> props<span class="token punctuation">,</span> data<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">h</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>props<span class="token punctuation">.</span>level<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> children<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸¾ä¸ªä¾‹å­</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// app.vue</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>FunctionalButton @click<span class="token operator">=</span><span class="token string">&quot;log&quot;</span><span class="token operator">&gt;</span>
    Click me
  <span class="token operator">&lt;</span><span class="token operator">/</span>FunctionalButton<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// FunctionalButton.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  functional<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">createElement<span class="token punctuation">,</span> <span class="token punctuation">{</span> props<span class="token punctuation">,</span> listeners<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span>
      <span class="token string">'button'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        attrs<span class="token operator">:</span> props<span class="token punctuation">,</span>
        on<span class="token operator">:</span> <span class="token punctuation">{</span>
          click<span class="token operator">:</span> listeners<span class="token punctuation">.</span>click
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      children
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div style="margin-top:50px;"></div> <h3 id="æ¸²æŸ“å‡½æ•°-jsx"><a href="#æ¸²æŸ“å‡½æ•°-jsx" class="header-anchor">#</a> æ¸²æŸ“å‡½æ•° &amp; JSX</h3> <h4 id="ç®€ä»‹-3"><a href="#ç®€ä»‹-3" class="header-anchor">#</a> ç®€ä»‹</h4> <p>ç”¨ <code>js</code> çš„æ–¹å¼æ¥æ¸²æŸ“ <code>html</code> æ–‡ä»¶ï¼Œ<a href="https://v3.cn.vuejs.org/guide/render-function.html#dom-%E6%A0%91" target="_blank" rel="noopener noreferrer">è¯¦æƒ…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p><div style="margin-top:30px;"></div><p></p> <h4 id="ç”¨æ³•-3"><a href="#ç”¨æ³•-3" class="header-anchor">#</a> ç”¨æ³•</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// æ¨¡ç‰ˆæ–‡ä»¶</span>
<span class="token operator">&lt;</span>anchored<span class="token operator">-</span>heading <span class="token operator">:</span>level<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Hello<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> world<span class="token operator">!</span> <span class="token operator">&lt;</span><span class="token operator">/</span>anchored<span class="token operator">-</span>heading<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">h</span><span class="token punctuation">(</span>
  <span class="token string">'anchored-heading'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    level<span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token function">h</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> <span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">' world!'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><p>ä¸Šè¿°æ¨¡æ¿å¦‚æ­¤ç®€å•çš„æƒ…å†µä¸‹ï¼Œæ¸²æŸ“å‡½æ•°å†™èµ·æ¥æ¯”è¾ƒç—›è‹¦ï¼ŒæœŸæœ›èƒ½æœ‰æ›´æ¥è¿‘æ¨¡ç‰ˆçš„æ¸²æŸ“å†™æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> AnchoredHeading <span class="token keyword">from</span> <span class="token string">'./AnchoredHeading.vue'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>AnchoredHeading level<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Hello<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> world<span class="token operator">!</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>AnchoredHeading<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#demo'</span><span class="token punctuation">)</span>
</code></pre></div><div style="margin-top:50px;"></div> <h3 id="mixin"><a href="#mixin" class="header-anchor">#</a> mixin</h3> <h4 id="ç®€ä»‹-4"><a href="#ç®€ä»‹-4" class="header-anchor">#</a> ç®€ä»‹</h4> <p><code>Mixin</code> æä¾›äº†ä¸€ç§éå¸¸çµæ´»çš„æ–¹å¼ï¼Œæ¥åˆ†å‘ <code>Vue</code> ç»„ä»¶ä¸­çš„å¯å¤ç”¨åŠŸèƒ½ã€‚ä¸€ä¸ª <code>mixin</code> å¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ã€‚å½“ç»„ä»¶ä½¿ç”¨ <code>mixin</code> å¯¹è±¡æ—¶ï¼Œæ‰€æœ‰ <code>mixin</code> å¯¹è±¡çš„é€‰é¡¹å°†è¢«â€œæ··åˆâ€è¿›å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ã€‚<a href="https://v3.cn.vuejs.org/guide/mixins.html#%E5%9F%BA%E7%A1%80" target="_blank" rel="noopener noreferrer">è¯¦æƒ…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p><div style="margin-top:30px;"></div><p></p> <h4 id="ç”¨æ³•-4"><a href="#ç”¨æ³•-4" class="header-anchor">#</a> ç”¨æ³•</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// define a mixin object</span>
<span class="token keyword">const</span> myMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello from mixin!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// define an app that uses this mixin</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mixins<span class="token operator">:</span> <span class="token punctuation">[</span>myMixin<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#mixins-basic'</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;hello from mixin!&quot;</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="é—®é¢˜"><a href="#é—®é¢˜" class="header-anchor">#</a> é—®é¢˜</h4> <ul><li>æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­æš´éœ²çš„ <code>property</code> æ¥æºä¸æ¸…æ™°ã€‚ä¾‹å¦‚åœ¨é˜…è¯»ä¸€ä¸ªè¿ç”¨äº†å¤šä¸ª <code>mixin</code> çš„æ¨¡æ¿æ—¶ï¼Œå¾ˆéš¾çœ‹å‡ºæŸä¸ª <code>property</code> æ˜¯ä»å“ªä¸€ä¸ª <code>mixin</code> ä¸­æ³¨å…¥çš„ã€‚</li> <li>å‘½åç©ºé—´å†²çªï¼š<code>Mixin</code> ä¹‹é—´çš„ <code>property</code> å’Œæ–¹æ³•å¯èƒ½æœ‰å†²çªï¼ŒåŒæ—¶é«˜é˜¶ç»„ä»¶ä¹Ÿå¯èƒ½å’Œé¢„æœŸçš„ <code>prop</code> æœ‰å‘½åå†²çªã€‚
<div style="margin-top:50px;"></div></li></ul> <h3 id="vue-hooks"><a href="#vue-hooks" class="header-anchor">#</a> vue-hooks</h3> <h4 id="ç®€ä»‹-5"><a href="#ç®€ä»‹-5" class="header-anchor">#</a> ç®€ä»‹</h4> <p><code>Hooks</code> å®ç°äº† <code>mixins</code> çš„åŠŸèƒ½ï¼Œä½†é¿å…äº† <code>mixins</code> å¸¦æ¥çš„ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š</p> <ul><li>å…è®¸ç›¸äº’ä¼ é€’çŠ¶æ€</li> <li>æ˜ç¡®æŒ‡å‡ºé€»è¾‘æ¥è‡ªå“ªé‡Œ</li> <li>é¿å…äº§ç”Ÿå†²çª
<br>æ„Ÿè§‰å’Œ<code>VCA</code> çš„ç›®æ ‡æ˜¯ä¸€æ ·çš„ï¼Œåƒæ˜¯ä¸€ä¸ªè¯•éªŒæ€§çš„æ–¹æ¡ˆï¼Œæ²¡æœ‰æ‰¾åˆ°è¿™ä¸¤ä¸ªç›´æ¥çš„æ¦‚å¿µåŒºåˆ«ï¼Œæš‚æ—¶ç†è§£ä¸º <code>VCA</code>ï¼Œ
<div style="margin-top:30px;"></div></li></ul> <h4 id="ç”¨æ³•-5"><a href="#ç”¨æ³•-5" class="header-anchor">#</a> ç”¨æ³•</h4> <p><a href="https://juejin.cn/post/6844903784598994952" target="_blank" rel="noopener noreferrer">ç”¨æ³•ç¤ºä¾‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div style="margin-top:100px;"></div> <h2 id="ç»„ä»¶åº“"><a href="#ç»„ä»¶åº“" class="header-anchor">#</a> ç»„ä»¶åº“</h2> <h3 id="ç®€ä»‹-6"><a href="#ç®€ä»‹-6" class="header-anchor">#</a> ç®€ä»‹</h3> <p>ç»„ä»¶åº“æœ¬è´¨ä¸Šæ˜¯ä¸€ç§ <code>npm</code> åŒ…ï¼Œé’ˆå¯¹å¯å¤ç”¨çš„ç»„ä»¶åšçš„ä¸€ç§æ‰“åŒ…å·¥ä½œ
</p><div style="margin-top:50px;"></div><p></p> <h3 id="å¼€å‘"><a href="#å¼€å‘" class="header-anchor">#</a> å¼€å‘</h3> <h4 id="webpack-å…¥å£æ–‡ä»¶"><a href="#webpack-å…¥å£æ–‡ä»¶" class="header-anchor">#</a> webpack å…¥å£æ–‡ä»¶</h4> <ol><li>å¯¹äºå¤š <code>package</code> æ¨¡å¼ï¼ˆsrc/packagesï¼‰ï¼Œè¿™æ˜¯æ•´ä½“çš„å…¥å£æ–‡ä»¶</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Index <span class="token keyword">from</span> <span class="token string">'./packages/demo/index.js'</span>
<span class="token keyword">const</span> components <span class="token operator">=</span> <span class="token punctuation">[</span>Index<span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  components<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>install<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>name<span class="token punctuation">,</span> item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// è‡ªåŠ¨å®‰è£… æ–¹ä¾¿æ‰“åŒ…æˆå‹ç¼©æ–‡ä»¶, ç”¨&lt;script scr=''&gt;&lt;/script&gt;çš„æ–¹å¼å¼•ç”¨</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">install</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>Vue<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ³¨æ„è¿™ç§å¯¼å‡ºæ–¹å¼ï¼Œåé¢ä¼šè¯´åˆ°</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  install<span class="token punctuation">,</span>
  Index<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>å•ä¸ª <code>pacakge</code> æ‰“åŒ…å…¥å£æ–‡ä»¶ï¼š</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> MyComponent1 <span class="token keyword">from</span> <span class="token string">'./index.vue'</span>

<span class="token comment">/* istanbul ignore next */</span>
MyComponent1<span class="token punctuation">.</span><span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>MyComponent1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> MyComponent1<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> MyComponent1
</code></pre></div><div style="margin-top:50px;"></div> <h3 id="å¼•å…¥æ–¹å¼"><a href="#å¼•å…¥æ–¹å¼" class="header-anchor">#</a> å¼•å…¥æ–¹å¼</h3> <h4 id="æŒ‰éœ€å¼•å…¥å•ä¸ªåŒ…"><a href="#æŒ‰éœ€å¼•å…¥å•ä¸ªåŒ…" class="header-anchor">#</a> æŒ‰éœ€å¼•å…¥å•ä¸ªåŒ…</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> MyCompList <span class="token keyword">from</span> '@nibfe<span class="token operator">/</span>pattern<span class="token operator">-</span>select<span class="token operator">/</span>build<span class="token operator">/</span>es<span class="token operator">/</span>packages<span class="token operator">/</span>parttern<span class="token operator">-</span>list<span class="token operator">/</span>index<span class="token punctuation">.</span>jsâ€™<span class="token punctuation">.</span> 
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>MyCompList<span class="token punctuation">)</span>
</code></pre></div><h4 id="å¼•å…¥å…¨éƒ¨åŒ…"><a href="#å¼•å…¥å…¨éƒ¨åŒ…" class="header-anchor">#</a> å¼•å…¥å…¨éƒ¨åŒ…</h4> <p>è¿™ç§å¼•å…¥æ–¹å¼ä¸€å®šè¦ä¿è¯åœ¨ 1 ä¸­çš„å…¥å£æ–‡ä»¶ä¸­åŒ…å«è¦å¼•å…¥çš„ç»„ä»¶ï¼Œå¦‚ <code>Index</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> MyComp <span class="token keyword">from</span> <span class="token string">'@nibfe/pattern-select'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>MyComp<span class="token punctuation">)</span>
</code></pre></div><h4 id="æŒ‰éœ€å¼•å…¥"><a href="#æŒ‰éœ€å¼•å…¥" class="header-anchor">#</a> æŒ‰éœ€å¼•å…¥</h4> <p><strong>1ä¸­export default</strong> çš„å¯¼å‡ºæ–¹å¼ä¸èƒ½ç”¨ {} çš„æ–¹å¼å¼•å…¥ï¼Œå¿…é¡»ç”¨ <code>export</code> çš„æ–¹å¼å¯¼å‡ºæ‰èƒ½ç”¨ {} å¯¼å…¥</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MyComp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@nibfe/pattern-select'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>MyComp<span class="token punctuation">)</span>
</code></pre></div><p>å¦‚æœæƒ³è¦ç”¨ {} æŒ‰éœ€å¼•å…¥çš„æ–¹å¼ï¼Œé‚£å°±å¿…é¡»è¦å¼•å…¥ <code>babel-plugin-import</code></p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@vue/app'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'import'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        libraryName<span class="token operator">:</span> <span class="token string">'@nibfe/vault'</span><span class="token punctuation">,</span>
        <span class="token function">customStyleName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@nibfe/vault/build/styles/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.css</span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">customName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@nibfe/vault/build/es/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.js</span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:50px;"></div> <h3 id="ç»„ä»¶åº“æ‰“åŒ…"><a href="#ç»„ä»¶åº“æ‰“åŒ…" class="header-anchor">#</a> ç»„ä»¶åº“æ‰“åŒ…</h3> <p>æ‰“åŒ…å·¥å…·ç”¨çš„æ˜¯ <code>rollup</code>ã€‚æ‰“åŒ…æ–¹æ³• <code>CJS, AMD, UMD å’Œ ESM</code>, å…¶ä¸­ <code>AMD</code> è¯´çš„å¼‚æ­¥æ˜¯ä¸‹è½½æ—¶ä¸ä¼šé˜»å¡å…¶ä»–è¿›ç¨‹ï¼Œå°±åƒæ˜¯ <code>script</code> ä¸­çš„ <code>async</code>ã€‚å…·ä½“è¯¦ç»†çœ‹ğŸ‘‡ä¸‹é¢é“¾æ¥
</p><div style="margin-top:50px;"></div><p></p> <h3 id="å¼•å…¥ç¬¬ä¸‰æ–¹åº“"><a href="#å¼•å…¥ç¬¬ä¸‰æ–¹åº“" class="header-anchor">#</a> å¼•å…¥ç¬¬ä¸‰æ–¹åº“</h3> <p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæƒ³è¦æŒ‰éœ€å¼•å…¥ï¼Œå¿…é¡»æ‰“åŒ…çš„ç»“æœä¸­æœ‰æŒ‰å•åŒ…æ‰“åŒ…çš„ï¼Œä¹Ÿæœ‰æ•´ä½“æ‰“åŒ…çš„ç»“æœã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>packages</code> ç›®å½•å¤–æœ‰ <code>index.js</code> å…¥å£æ–‡ä»¶ï¼Œå­ç›®å½•ä¸­ä¹Ÿæœ‰å…¥å£æ–‡ä»¶çš„åŸå› ã€‚é‚£ä¹ˆè¯¥å¦‚ä½•å¼•å…¥ç¬¬ä¸‰æ–¹åº“å‘¢ï¼Œå¦‚æœæ˜¯å±€éƒ¨å¼•å…¥ï¼Œåœ¨ <code>packages</code> å­åŒ…çš„ <code>.vue</code> ä¸­å¼•å…¥å³å¯ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/packages/xx/index.vue</span>
<span class="token keyword">import</span> <span class="token string">'@ss/mtd-vue/lib/theme2/index.css'</span>

<span class="token comment">// æŒ‰éœ€å¼•å…¥</span>
<span class="token keyword">import</span> a <span class="token keyword">from</span> <span class="token string">'../build/es/packages/demo/index.js'</span>
</code></pre></div><p>å¦‚æœæ˜¯å…¨å±€å¼•å…¥ï¼Œå¿…é¡»åœ¨å…¨å±€çš„æ‰“åŒ…å…¥å£æ–‡ä»¶ä¸­ï¼ˆsrc/index.jsï¼‰ä¸­å¼•å…¥ï¼Œæ‰“åŒ…å‡ºçš„ç»“æœä¹Ÿåªèƒ½å…¨å±€å¼•å…¥ï¼Œä¸èƒ½æŒ‰éœ€å¼•å…¥ï¼Œå› ä¸ºåœ¨æŒ‰éœ€æ‰“åŒ…çš„æ–‡ä»¶ä¸­ä¸ä¼šåŒ…å«å…¨å±€çš„æ–‡ä»¶ã€‚æ³¨æ„ï¼š<code>entry/main</code> ä¸­æ˜¯æµ‹è¯•æ–‡ä»¶ï¼Œæ–¹ä¾¿æœ¬åœ°æµ‹è¯•ç»„ä»¶åº“çš„ï¼Œä¸ä¼šå†™å…¥åˆ°æœ€åçš„æ‰“åŒ…ç»“æœä¸­</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// src/index.js</span>
<span class="token keyword">import</span> <span class="token string">'@ss/mtd-vue/lib/theme2/index.css'</span>

<span class="token comment">// æ‰“åŒ…ç»“æœå¼•å…¥ï¼Œå…¨å±€å¼•å…¥</span>
<span class="token keyword">import</span> a <span class="token keyword">from</span> <span class="token string">'../build/es/index.es'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</code></pre></div><p>ä¸ºäº†é˜²æ­¢ç¬¬ä¸‰æ–¹åº“äºŒæ¬¡æ‰“åŒ…ï¼ˆåŸåŒ…æ‰“åŒ…è¿‡ä¸€æ¬¡ï¼‰ï¼Œéœ€è¦åœ¨ç»„ä»¶åº“æ‰“åŒ…çš„æ—¶å€™æ’é™¤æ‰</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// vue.config.js</span>
pluginOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
  romeLibrary<span class="token operator">:</span> <span class="token punctuation">{</span>
    rollupOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      external<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">@ss\/mtd-vue</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">@nibfe\/dz-form</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// æ­¤å¤„ä¸¾ä¾‹,å…¶ä¸­/@gfe/,/@hfe/æ˜¯é€šè¿‡æ­£åˆ™çš„æ–¹å¼åŒ¹é…ï¼Œ'@/lib/axios'å­—ç¬¦ä¸²æ–¹å¼æ˜¯åŒ¹é…åŒåç¬¬ä¸‰æ–¹åŒ…</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><div style="margin-top:50px;"></div> <h3 id="ğŸ”—ç›¸å…³é“¾æ¥"><a href="#ğŸ”—ç›¸å…³é“¾æ¥" class="header-anchor">#</a> ğŸ”—ç›¸å…³é“¾æ¥</h3> <ul><li><a href="https://www.npmjs.com/package/babel-plugin-import" target="_blank" rel="noopener noreferrer">babel-plugin-import<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6844903459536240648" target="_blank" rel="noopener noreferrer">æ‰‹æŠŠæ‰‹æ•™ä½ å¼€å‘ç»„ä»¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6905708824703795214" target="_blank" rel="noopener noreferrer">ç®€å•å®ç° babel-plugin-import<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6935973925004247077" target="_blank" rel="noopener noreferrer">CJS, AMD, UMD å’Œ ESM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.360doc.com/content/19/0519/15/13328254_836725029.shtml" target="_blank" rel="noopener noreferrer">AMDã€CJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6844903735236247565" target="_blank" rel="noopener noreferrer">webpackå’Œrollup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.rollupjs.com/" target="_blank" rel="noopener noreferrer">rollup<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.cjw.design/blog/old/rollup#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%80%89%E9%A1%B9%E8%AF%A6%E8%A7%A3" target="_blank" rel="noopener noreferrer">rollupé…ç½®æ–‡ä»¶<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div style="margin-top:100px;"></div> <h2 id="generatorapi"><a href="#generatorapi" class="header-anchor">#</a> GeneratorAPI</h2> <h3 id="ç®€ä»‹-7"><a href="#ç®€ä»‹-7" class="header-anchor">#</a> ç®€ä»‹</h3> <p>æ’ä»¶çš„ <code>Generator</code> éƒ¨åˆ†é€šå¸¸åœ¨ä½ æƒ³è¦ä¸ºé¡¹ç›®æ‰©å±•åŒ…ä¾èµ–ï¼Œåˆ›å»ºæ–°çš„æ–‡ä»¶æˆ–è€…ç¼–è¾‘å·²ç»å­˜åœ¨çš„æ–‡ä»¶æ—¶éœ€è¦ã€‚</p> <p>åœ¨ <code>CLI</code> æ’ä»¶å†…éƒ¨ï¼Œ<code>generator</code> åº”è¯¥æ”¾åœ¨ <code>generator.js</code> æˆ–è€… <code>generator/index.js</code> æ–‡ä»¶ä¸­ã€‚å®ƒå°†åœ¨ä»¥ä¸‹ä¸¤ä¸ªåœºæ™¯è¢«è°ƒç”¨ï¼š</p> <p>é¡¹ç›®åˆå§‹åˆ›å»ºæœŸé—´ï¼Œ<code>CLI</code> æ’ä»¶è¢«ä½œä¸ºé¡¹ç›®åˆ›å»º <code>preset</code> çš„ä¸€éƒ¨åˆ†è¢«å®‰è£…æ—¶ã€‚</p> <p>å½“æ’ä»¶åœ¨é¡¹ç›®åˆ›å»ºå®Œæˆå’Œé€šè¿‡ <code>vue add</code> æˆ–è€… <code>vue invoke</code> å•ç‹¬è°ƒç”¨è¢«å®‰è£…æ—¶ã€‚</p> <p>ä¸€ä¸ª <code>generator</code> åº”è¯¥å¯¼å‡ºä¸€ä¸ªæ¥æ”¶ä¸‰ä¸ªå‚æ•°çš„å‡½æ•°ï¼š</p> <p>ä¸€ä¸ª <code>GeneratorAPI</code> å®ä¾‹ï¼›</p> <p>æ’ä»¶çš„ <code>generator</code> é€‰é¡¹ã€‚è¿™äº›é€‰é¡¹åœ¨é¡¹ç›®åˆ›å»ºï¼Œæˆ–è€…ä» <code>~/.vuerc</code>è½½å…¥é¢„è®¾æ—¶è¢«è§£æã€‚ä¾‹å¦‚ï¼šå¦‚æœä¿å­˜çš„ <code>~/.vuerc</code> åƒè¿™æ ·ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;foo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;@vue/cli-plugin-foo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;option&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bar&quot;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœç”¨æˆ·ä½¿ç”¨ <code>preset foo</code> åˆ›å»ºäº†ä¸€ä¸ªé¡¹ç›®ï¼Œé‚£ä¹ˆ <code>@vue/cli-plugin-foo</code> çš„ <code>generator</code> å°±ä¼šæ”¶åˆ° <code>{ option: 'bar' }</code>ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚
</p><div style="margin-top:50px;"></div><p></p> <h3 id="å¸¸ç”¨-api"><a href="#å¸¸ç”¨-api" class="header-anchor">#</a> å¸¸ç”¨ API</h3> <h4 id="cliversion"><a href="#cliversion" class="header-anchor">#</a> cliVersion</h4> <p>The version string for the global @vue/cli version that is invoking the plugin.
</p><div style="margin-top:30px;"></div><p></p> <h4 id="assertcliversion"><a href="#assertcliversion" class="header-anchor">#</a> assertCliVersion</h4> <p>{integer | string} range - a semver range that @vue/cli needs to satisfy
</p><div style="margin-top:30px;"></div><p></p> <h4 id="cliserviceversion"><a href="#cliserviceversion" class="header-anchor">#</a> cliServiceVersion</h4> <p>The version string for the project local @vue/cli-service version that is invoking the plugin.
</p><div style="margin-top:30px;"></div><p></p> <h4 id="assertcliserviceversion"><a href="#assertcliserviceversion" class="header-anchor">#</a> assertCliServiceVersion</h4> <p>{integer | string} range - a semver range that @vue/cli-service needs to satisfy
</p><div style="margin-top:30px;"></div><p></p> <h4 id="resolve"><a href="#resolve" class="header-anchor">#</a> resolve</h4> <p>Resolve a path for the current project
</p><div style="margin-top:30px;"></div><p></p> <h4 id="hasplugin"><a href="#hasplugin" class="header-anchor">#</a> hasPlugin</h4> <p>Check if the project has a plugin with given id. If version range is given, then the plugin version should satisfy it, ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥è¾“å…¥ç‰ˆæœ¬å·
</p><div style="margin-top:30px;"></div><p></p> <h4 id="extendpackage"><a href="#extendpackage" class="header-anchor">#</a> extendPackage</h4> <p>æ‹“å±• <code>package.json</code> é…ç½®</p> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span><span class="token function">extendPackage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  scripts<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'serve'</span><span class="token operator">:</span> <span class="token string">'vue-cli-service serve'</span><span class="token punctuation">,</span>
    <span class="token string">'build'</span><span class="token operator">:</span> <span class="token string">'vue-cli-service build'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  dependencies<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'vue'</span><span class="token operator">:</span> <span class="token string">'^2.5.17'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="render"><a href="#render" class="header-anchor">#</a> render</h4> <p>åˆ©ç”¨ <code>ejs</code> æ¸²æŸ“æ¨¡æ¿æ–‡ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token string">'./template'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  doesCompile<span class="token operator">:</span> api<span class="token punctuation">.</span><span class="token function">hasPlugin</span><span class="token punctuation">(</span><span class="token string">'babel'</span><span class="token punctuation">)</span> <span class="token operator">||</span> api<span class="token punctuation">.</span><span class="token function">hasPlugin</span><span class="token punctuation">(</span><span class="token string">'typescript'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="postprocessfiles"><a href="#postprocessfiles" class="header-anchor">#</a> postProcessFiles</h4> <p><code>push</code> ä¸€ä¸ªæ–‡ä»¶ä¸­é—´ä»¶ï¼Œå®ƒå°†åœ¨æ‰€æœ‰æ™®é€šä¸­é—´ä»¶éƒ½æ‰§è¡Œå®Œæˆåå†æ‰§è¡Œ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç”¨æ³•</span>
api<span class="token punctuation">.</span><span class="token function">postProcessFiles</span><span class="token punctuation">(</span><span class="token parameter">files</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// åŸç†</span>
<span class="token comment">// postProcessFilesCbs æ˜¯åœ¨æ‰€æœ‰æ™®é€šæ–‡ä»¶åœ¨å†…å­˜ä¸­æ¸²æŸ“æˆå­—ç¬¦ä¸²å®Œæˆä¹‹åè¦æ‰§è¡Œçš„éå†å›è°ƒ</span>
<span class="token function">postProcessFiles</span> <span class="token punctuation">(</span><span class="token parameter">cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>generator<span class="token punctuation">.</span>postProcessFilesCbs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="oncreatecomplete"><a href="#oncreatecomplete" class="header-anchor">#</a> onCreateComplete</h4> <p>å†…å­˜ä¸­ä¿å­˜çš„æ–‡ä»¶å­—ç¬¦ä¸²å…¨éƒ¨è¢«å†™å…¥æ–‡ä»¶åçš„å›è°ƒå‡½æ•°</p> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span><span class="token function">onCreateComplete</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="exitlog"><a href="#exitlog" class="header-anchor">#</a> exitLog</h4> <p>å½“ <code>generator</code> é€€å‡ºçš„æ—¶å€™è¾“å‡ºçš„ä¿¡æ¯</p> <p><code>{('log'|'info'|'done'|'warn'|'error')} [type='log'] - type of the message</code></p> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span><span class="token function">exitLog</span><span class="token punctuation">(</span><span class="token string">'ä¸ºäº†æ›´å¥½çš„å¼€å‘ï¼Œè¯·åœ¨æœ¬åœ° /etc/hosts ä¸­é…ç½® local.sankuai.com æŒ‡å‘ 127.0.0.1'</span><span class="token punctuation">,</span> <span class="token string">'info'</span><span class="token punctuation">)</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="genjsconfig"><a href="#genjsconfig" class="header-anchor">#</a> genJSConfig</h4> <p>å°† <code>json</code> æ–‡ä»¶ç”Ÿæˆä¸º <code>js</code> é…ç½®æ–‡ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> utilsFactory <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@nibfe/vue-cli-shared-utils'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> utils <span class="token operator">=</span> <span class="token function">utilsFactory</span><span class="token punctuation">(</span>api<span class="token punctuation">)</span>
<span class="token keyword">const</span> eslintRcTargetPath <span class="token operator">=</span> api<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'.eslintrc.js'</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isVueCli3<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> utils<span class="token punctuation">.</span><span class="token function">generateFile</span><span class="token punctuation">(</span>eslintRcTargetPath<span class="token punctuation">,</span> api<span class="token punctuation">.</span><span class="token function">genJSConfig</span><span class="token punctuation">(</span>eslintConfig<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="makejsonlyvalue"><a href="#makejsonlyvalue" class="header-anchor">#</a> makeJSOnlyValue</h4> <p>Turns a string expression into executable JS for .js config files</p> <div class="language-js extra-class"><pre class="language-js"><code>eslintConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// cache origin eslintConfig</span>
  <span class="token operator">...</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>pkg<span class="token punctuation">.</span>eslintConfig <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  rules<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token punctuation">(</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>pkg<span class="token punctuation">.</span>eslintConfig <span class="token operator">&amp;&amp;</span> api<span class="token punctuation">.</span>generator<span class="token punctuation">.</span>pkg<span class="token punctuation">.</span>eslintConfig<span class="token punctuation">.</span>rules<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">'no-console'</span><span class="token operator">:</span> api<span class="token punctuation">.</span><span class="token function">makeJSOnlyValue</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">process.env.NODE_ENV === 'production' ? 'error' : 'off'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">'no-debugger'</span><span class="token operator">:</span> api<span class="token punctuation">.</span><span class="token function">makeJSOnlyValue</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">process.env.NODE_ENV === 'production' ? 'error' : 'off'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="injectimports"><a href="#injectimports" class="header-anchor">#</a> injectImports</h4> <p>å‘æ–‡ä»¶å½“ä¸­æ³¨å…¥ <code>import</code> è¯­æ³•çš„æ–¹æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span><span class="token function">injectImports</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>entryFile<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">import '@/plugins/axios'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="injectrootoptions"><a href="#injectrootoptions" class="header-anchor">#</a> injectRootOptions</h4> <p>å‘ <code>Vue</code> æ ¹å®ä¾‹ä¸­æ·»åŠ é€‰é¡¹</p> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span><span class="token function">injectRootOptions</span><span class="token punctuation">(</span>api<span class="token punctuation">.</span>entryFile<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">store</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="entryfile"><a href="#entryfile" class="header-anchor">#</a> entryFile</h4> <p>Get the entry file taking into account typescript, å¦‚ {('src/main.ts'|'src/main.js')}</p> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span>entryFile
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="invoking"><a href="#invoking" class="header-anchor">#</a> invoking</h4> <p>Checks if the plugin is being invoked</p> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span>invoking
</code></pre></div><h4 id="addconfigtransform"><a href="#addconfigtransform" class="header-anchor">#</a> addConfigTransform</h4> <p>æ’ä»¶é€šè¿‡ <code>GeneratorAPI</code> æš´éœ²çš„ <code>addConfigTransform</code> æ–¹æ³•æ·»åŠ å¦‚ä½•æå–é…ç½®æ–‡ä»¶, ä¸€èˆ¬ç”¨äºä» <code>package.json</code> ä¸­æå–é…ç½®åˆ°å¦‚ <code>vue.config.js</code> æ­¤ç±»çš„ä¸“ç”¨æ–‡ä»¶ä¸­</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ul><li>{string} key - config key in package.json</li> <li>{object} options - options</li> <li>{object} options.file - file descriptor. Used to search for existing file. Each key is a file type (possible values: ['js', 'json', 'yaml', 'lines']). The value is a list of filenames</li></ul></div> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span><span class="token function">addConfigTransform</span><span class="token punctuation">(</span><span class="token string">'fooConfig'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  file<span class="token operator">:</span> <span class="token punctuation">{</span>
    json<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'foo.config.json'</span><span class="token punctuation">]</span> <span class="token comment">// æå–åˆ°è¯¥é…ç½®æ–‡ä»¶ä¸­</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div style="margin-top:50px;"></div> <h3 id="ğŸ”—ç›¸å…³é“¾æ¥-2"><a href="#ğŸ”—ç›¸å…³é“¾æ¥-2" class="header-anchor">#</a> ğŸ”—ç›¸å…³é“¾æ¥</h3> <ul><li><a href="https://cli.vuejs.org/dev-guide/generator-api.html#injectimports" target="_blank" rel="noopener noreferrer">generatorAPI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://kuangpf.com/vue-cli-analysis/create/generator.html" target="_blank" rel="noopener noreferrer">vue analysis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6844904154461126670" target="_blank" rel="noopener noreferrer">postProcessFiles<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6844904154461126670" target="_blank" rel="noopener noreferrer">vue cliæºç æ¢ç´¢<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div style="margin-top:100px;"></div> <h2 id="history-å’Œ-hash-æ¨¡å¼"><a href="#history-å’Œ-hash-æ¨¡å¼" class="header-anchor">#</a> history å’Œ hash æ¨¡å¼</h2> <h3 id="ç®€ä»‹-8"><a href="#ç®€ä»‹-8" class="header-anchor">#</a> ç®€ä»‹</h3> <p><code>vue</code> æ˜¯æ¸è¿›å¼å‰ç«¯å¼€å‘æ¡†æ¶ï¼Œä¸ºäº†å®ç° <code>SPA</code> ï¼Œéœ€è¦å¼•å…¥å‰ç«¯è·¯ç”±ç³»ç»Ÿï¼ˆ<code>vue-router</code>ï¼‰ã€‚å‰ç«¯è·¯ç”±çš„æ ¸å¿ƒæ˜¯ï¼šæ”¹å˜è§†å›¾çš„åŒæ—¶ä¸ä¼šå‘åç«¯å‘å‡ºè¯·æ±‚ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œæµè§ˆå™¨æä¾›äº† <code>hash</code> å’Œ <code>history</code> ä¸¤ç§æ¨¡å¼ã€‚</p> <p><code>hash</code> è™½ç„¶å‡ºç°åœ¨ <code>URL</code> ä¸­ï¼Œä½†ä¸ä¼šè¢«åŒ…å«åœ¨ <code>http</code> è¯·æ±‚ä¸­ï¼Œå¯¹åç«¯å®Œå…¨æ²¡æœ‰å½±å“ï¼Œå› æ­¤æ”¹å˜ <code>hash</code> ä¸ä¼šé‡æ–°åŠ è½½é¡µé¢ã€‚</p> <p><code>history</code> åˆ©ç”¨äº† <code>html5 history interface</code> ä¸­æ–°å¢çš„ <code>pushState()</code> å’Œ <code>replaceState()</code> æ–¹æ³•ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•åº”ç”¨äºæµè§ˆå™¨è®°å½•æ ˆï¼Œåœ¨å½“å‰å·²æœ‰çš„ <code>backã€forwardã€go</code> åŸºç¡€ä¹‹ä¸Šï¼Œå®ƒä»¬æä¾›äº†å¯¹å†å²è®°å½•ä¿®æ”¹çš„åŠŸèƒ½ã€‚åªæ˜¯å½“å®ƒä»¬æ‰§è¡Œä¿®æ”¹æ—¶ï¼Œè™½ç„¶æ”¹å˜äº†å½“å‰çš„ <code>URL</code> ï¼Œä½†æµè§ˆå™¨ä¸ä¼šç«‹å³å‘åç«¯å‘é€è¯·æ±‚ã€‚å› æ­¤å¯ä»¥è¯´ï¼Œ <code>hash</code> æ¨¡å¼å’Œ <code>history</code> æ¨¡å¼éƒ½å±äºæµè§ˆå™¨è‡ªèº«çš„å±æ€§ï¼Œ<code>vue-router</code> åªæ˜¯åˆ©ç”¨äº†è¿™ä¸¤ä¸ªç‰¹æ€§ï¼ˆé€šè¿‡è°ƒç”¨æµè§ˆå™¨æä¾›çš„æ¥å£ï¼‰æ¥å®ç°è·¯ç”±ã€‚
</p><div style="margin-top:50px;"></div><p></p> <h3 id="åŸç†"><a href="#åŸç†" class="header-anchor">#</a> åŸç†</h3> <h4 id="_1-hash"><a href="#_1-hash" class="header-anchor">#</a> 1. hash</h4> <p><code>hash</code> æ¨¡å¼çš„åŸç†æ˜¯ <code>onhashchange</code> äº‹ä»¶ï¼Œå¯ä»¥åœ¨ <code>window</code> å¯¹è±¡ä¸Šç›‘å¬è¿™ä¸ªäº‹ä»¶ã€‚</p> <p><code>hash</code> å‘ç”Ÿå˜åŒ–çš„ <code>url</code> éƒ½ä¼šè¢«æµè§ˆå™¨è®°å½•ä¸‹æ¥ï¼Œä»è€Œä½ ä¼šå‘ç°æµè§ˆå™¨çš„å‰è¿›åé€€éƒ½å¯ä»¥ä½¿ç”¨äº†ï¼ŒåŒæ—¶ç‚¹å‡»åé€€æ—¶ï¼Œé¡µé¢å­—ä½“é¢œè‰²ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™æ ·ä¸€æ¥è™½ç„¶æ²¡æœ‰å‘åç«¯å‘é€è¯·æ±‚ï¼Œä½†æ˜¯é¡µé¢çŠ¶æ€å’Œ <code>url</code> å…³è”åœ¨äº†ä¸€èµ·ï¼Œè¿™å°±æ˜¯å‰ç«¯è·¯ç”±</p> <div class="language-js extra-class"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onhashchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>oldURL<span class="token punctuation">,</span> event<span class="token punctuation">.</span>newURL<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> hash <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> hash<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="_2-history"><a href="#_2-history" class="header-anchor">#</a> 2. history</h4> <p><code>hashchange</code> åªèƒ½æ”¹å˜ <strong>#</strong> åé¢çš„ä»£ç ç‰‡æ®µï¼Œ<code>history api ï¼ˆpushStateã€replaceStateã€goã€backã€forwardï¼‰</code> åˆ™ç»™äº†å‰ç«¯å®Œå…¨çš„è‡ªç”±ï¼Œé€šè¿‡åœ¨ <code>window</code> å¯¹è±¡ä¸Šç›‘å¬ <code>popState()</code> äº‹ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">ã€replaceState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šstateObjã€titleã€urlã€‚

<span class="token comment">// è®¾ç½®çŠ¶æ€</span>
history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ç›‘å¬çŠ¶æ€</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onpopstate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>state <span class="token operator">&amp;&amp;</span> event<span class="token punctuation">.</span>state<span class="token punctuation">.</span>color <span class="token operator">===</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ”¹å˜çŠ¶æ€</span>
history<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
history<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>é€šè¿‡ <code>pushState</code> æŠŠé¡µé¢çš„çŠ¶æ€ä¿å­˜åœ¨ <code>state</code> å¯¹è±¡ä¸­ï¼Œå½“é¡µé¢çš„ <code>url</code> å†å˜å›åˆ°è¿™ä¸ª <code>url</code> æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>event.state</code> å–åˆ°è¿™ä¸ª <code>state</code> å¯¹è±¡ï¼Œä»è€Œå¯ä»¥å¯¹é¡µé¢çŠ¶æ€è¿›è¡Œè¿˜åŸï¼Œå¦‚é¡µé¢æ»šåŠ¨æ¡çš„ä½ç½®ã€é˜…è¯»è¿›åº¦ã€ç»„ä»¶çš„å¼€å…³ç­‰</p> <div style="margin-top:50px;"></div> <h3 id="ğŸ”—ç›¸å…³é“¾æ¥-3"><a href="#ğŸ”—ç›¸å…³é“¾æ¥-3" class="header-anchor">#</a> ğŸ”—ç›¸å…³é“¾æ¥</h3> <ul><li><a href="https://juejin.cn/post/6844903625169502216" target="_blank" rel="noopener noreferrer">historyå’Œhashæ¨¡å¼çš„åŒºåˆ«<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/Charissa2017/article/details/104779412" target="_blank" rel="noopener noreferrer">historyå’Œhashæ¨¡å¼è¯¦è§£<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.jianshu.com/p/bb5f9263e169" target="_blank" rel="noopener noreferrer">replaceStateå’ŒpushStateçš„åŒºåˆ«<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div style="margin-top:100px;"></div> <h2 id="browser-module-main-å­—æ®µ"><a href="#browser-module-main-å­—æ®µ" class="header-anchor">#</a> browserï¼Œmoduleï¼Œmain å­—æ®µ</h2> <h3 id="ç®€ä»‹-9"><a href="#ç®€ä»‹-9" class="header-anchor">#</a> ç®€ä»‹</h3> <p>å‰ç«¯å¼€å‘ä¸­ä½¿ç”¨åˆ° <code>npm</code> åŒ…é‚£å¯ç®—æ˜¯å®¶å¸¸ä¾¿é¥­ï¼Œè€Œä½¿ç”¨åˆ° <code>npm</code> åŒ…æ€»å…ä¸äº†æ¥è§¦åˆ° <code>package.json</code> åŒ…é…ç½®æ–‡ä»¶ã€‚</p> <p>é‚£ä¹ˆè¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬åœ¨ä¸åŒç¯å¢ƒä¸‹ <code>import</code> ä¸€ä¸ª <code>npm</code> åŒ…æ—¶ï¼Œåˆ°åº•åŠ è½½çš„æ˜¯ <code>npm</code> åŒ…çš„å“ªä¸ªæ–‡ä»¶ï¼Ÿ</p> <p>è€å¸æœºä»¬å¾ˆå¿«åœ°ç»™å‡ºç­”æ¡ˆï¼š<code>main</code> å­—æ®µä¸­æŒ‡å®šçš„æ–‡ä»¶ã€‚</p> <p>ç„¶è€Œæˆ‘ä»¬æ¸…æ¥š <code>npm</code> åŒ…å…¶å®åˆåˆ†ä¸ºï¼šåªå…è®¸åœ¨å®¢æˆ·ç«¯ä½¿ç”¨çš„ï¼Œåªå…è®¸é€ æœåŠ¡ç«¯ä½¿ç”¨çš„ï¼Œæµè§ˆå™¨/æœåŠ¡ç«¯éƒ½å¯ä»¥ä½¿ç”¨ã€‚
å¦‚æœæˆ‘ä»¬éœ€è¦å¼€å‘ä¸€ä¸ª <code>npm</code> åŒ…åŒæ—¶å…¼å®¹æ”¯æŒ <code>web</code> ç«¯ å’Œ <code>server</code> ç«¯ï¼Œéœ€è¦åœ¨ä¸åŒç¯å¢ƒä¸‹åŠ è½½ <code>npm</code> åŒ…ä¸åŒçš„å…¥å£æ–‡ä»¶ï¼Œæ˜¾ç„¶ä¸€ä¸ª <code>main</code> å­—æ®µå·²ç»ä¸èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œè¿™å°±è¡ç”Ÿå‡ºæ¥äº† <code>module</code> ä¸ <code>browser</code> å­—æ®µã€‚</p> <p>æœ¬æ–‡å°±æ¥è¯´ä¸‹ è¿™å‡ ä¸ªå­—æ®µçš„ä½¿ç”¨åœºæ™¯ï¼Œä»¥åŠåŒæ—¶å­˜åœ¨è¿™å‡ ä¸ªå­—æ®µæ—¶ï¼Œä»–ä»¬ä¹‹é—´çš„ä¼˜å…ˆçº§ã€‚
</p><div style="margin-top:50px;"></div><p></p> <h3 id="ğŸ”—ç›¸å…³é“¾æ¥-4"><a href="#ğŸ”—ç›¸å…³é“¾æ¥-4" class="header-anchor">#</a> ğŸ”—ç›¸å…³é“¾æ¥</h3> <ul><li><a href="https://github.com/SunshowerC/blog/issues/8" target="_blank" rel="noopener noreferrer">package.json ä¸­ ä½ è¿˜ä¸æ¸…æ¥šçš„ browserï¼Œmoduleï¼Œmain å­—æ®µä¼˜å…ˆçº§ #8
<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div style="margin-top:100px;"></div> <h2 id="pluginapi"><a href="#pluginapi" class="header-anchor">#</a> pluginAPI</h2> <h3 id="ç®€ä»‹-10"><a href="#ç®€ä»‹-10" class="header-anchor">#</a> ç®€ä»‹</h3> <p><code>Service</code> æ’ä»¶å¯ä»¥ä¿®æ”¹ <code>webpack</code> é…ç½®ï¼Œåˆ›å»ºæ–°çš„ <code>vue-cli service</code> å‘½ä»¤æˆ–è€…ä¿®æ”¹å·²ç»å­˜åœ¨çš„å‘½ä»¤ï¼ˆå¦‚ <code>serve</code> å’Œ <code>build</code>ï¼‰ã€‚</p> <p><code>Service</code> æ’ä»¶åœ¨ <code>Service</code> å®ä¾‹è¢«åˆ›å»ºåè‡ªåŠ¨åŠ è½½ - ä¾‹å¦‚ï¼Œæ¯æ¬¡ <code>vue-cli-service</code> å‘½ä»¤åœ¨é¡¹ç›®ä¸­è¢«è°ƒç”¨çš„æ—¶å€™ã€‚å®ƒä½äº <code>CLI</code> æ’ä»¶æ ¹ç›®å½•çš„ <code>index.js</code> æ–‡ä»¶ã€‚</p> <p>ä¸€ä¸ª <code>service</code> æ’ä»¶åº”è¯¥å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š</p> <p>ä¸€ä¸ª <code>PluginAPI</code> å®ä¾‹</p> <p>ä¸€ä¸ªåŒ…å« <code>vue.config.js</code> å†…æŒ‡å®šçš„é¡¹ç›®æœ¬åœ°é€‰é¡¹çš„å¯¹è±¡ï¼Œæˆ–è€…åœ¨ <code>package.json</code> å†…çš„ <code>vue</code> å­—æ®µã€‚
</p><div style="margin-top:50px;"></div><p></p> <h3 id="å¸¸ç”¨api"><a href="#å¸¸ç”¨api" class="header-anchor">#</a> å¸¸ç”¨API</h3> <h4 id="version"><a href="#version" class="header-anchor">#</a> version</h4> <p>åŠ è½½è¯¥æ’ä»¶çš„ <code>@vue/cli-service</code> ç‰ˆæœ¬</p> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span>version
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="assertversion"><a href="#assertversion" class="header-anchor">#</a> assertVersion</h4> <p>éœ€è¦æ»¡è¶³çš„ <code>@vue/cli-service</code> çš„ç‰ˆæœ¬ï¼Œå…¥å‚ä¸º <code>string</code> æˆ– <code>integer</code></p> <div class="language-js extra-class"><pre class="language-js"><code>api<span class="token punctuation">.</span><span class="token function">assertVersion</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="getcwd"><a href="#getcwd" class="header-anchor">#</a> getCwd</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç”¨æ³•</span>
api<span class="token punctuation">.</span><span class="token function">getCwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// åŸç†</span>
<span class="token function">getCwd</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span>context
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="resolve-2"><a href="#resolve-2" class="header-anchor">#</a> resolve</h4> <p>ç›¸å¯¹äºæ ¹ç›®å½•çš„ç»å¯¹è·¯å¾„</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç”¨æ³•</span>
api<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span>

<span class="token comment">// åŸç†</span>
<span class="token function">resolve</span> <span class="token punctuation">(</span><span class="token parameter">_path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span>context<span class="token punctuation">,</span> _path<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="hasplugin-2"><a href="#hasplugin-2" class="header-anchor">#</a> hasPlugin</h4> <p>æ˜¯å¦åŒ…å«æŸä¸ªæ’ä»¶</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç”¨æ³•</span>
api<span class="token punctuation">.</span><span class="token function">hasPlugin</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span>

<span class="token comment">// åŸç†</span>
<span class="token function">hasPlugin</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">===</span> <span class="token string">'router'</span><span class="token punctuation">)</span> id <span class="token operator">=</span> <span class="token string">'vue-router'</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'vue-router'</span><span class="token punctuation">,</span> <span class="token string">'vuex'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pkg <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span>pkg
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>dependencies <span class="token operator">&amp;&amp;</span> pkg<span class="token punctuation">.</span>dependencies<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>devDependencies <span class="token operator">&amp;&amp;</span> pkg<span class="token punctuation">.</span>devDependencies<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> <span class="token function">matchesPluginId</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> p<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="registercommand"><a href="#registercommand" class="header-anchor">#</a> registerCommand</h4> <p>æ³¨å†Œ <code>cli</code> å‘½ä»¤æœåŠ¡ï¼Œ<code>options</code> ä¸ºä¸€ä¸ªåŒ…å« <code>vue.config.js</code> å†…æŒ‡å®šçš„é¡¹ç›®æœ¬åœ°é€‰é¡¹çš„å¯¹è±¡ï¼Œæˆ–è€…åœ¨ <code>package.json</code> å†…çš„ <code>vue</code> å­—æ®µ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç”¨æ³•</span>
api<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'addPage'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">args</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">addPage</span><span class="token punctuation">(</span>api<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// åŸç†</span>
<span class="token function">registerCommand</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> opts<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> opts <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fn <span class="token operator">=</span> opts
    opts <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span>commands<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> fn<span class="token punctuation">,</span> opts<span class="token operator">:</span> opts <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="chainwebpack"><a href="#chainwebpack" class="header-anchor">#</a> chainWebpack</h4> <p>é€šè¿‡ <code>webpack-chain</code> ä¿®æ”¹ <code>webpack</code> é…ç½®</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç”¨æ³•</span>
api<span class="token punctuation">.</span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span><span class="token function">devtool</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// åŸç†</span>
<span class="token function">chainWebpack</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span>webpackChainFns<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="configurewebpack"><a href="#configurewebpack" class="header-anchor">#</a> configureWebpack</h4> <p>é€šè¿‡ <code>webpack-merge</code> å¯¹ <code>webpack</code> é…ç½®è¿›è¡Œåˆå¹¶</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç”¨æ³•</span>
api<span class="token punctuation">.</span><span class="token function">configureWebpack</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span>devtool <span class="token operator">=</span> <span class="token string">'eval-source-map'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// åŸç†</span>
<span class="token function">configureWebpack</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>service<span class="token punctuation">.</span>webpackRawConfigFns<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:30px;"></div> <h4 id="configuredevserver"><a href="#configuredevserver" class="header-anchor">#</a> configureDevServer</h4> <p>Register a dev serve config function. It will receive the express app instance of the dev server.
</p><div style="margin-top:30px;"></div><p></p> <h4 id="resolvewebpackconfig"><a href="#resolvewebpackconfig" class="header-anchor">#</a> resolveWebpackConfig</h4> <p>è°ƒç”¨ä¹‹å‰é€šè¿‡ <code>chainWebpack</code> å’Œ <code>configureWebpack</code> ä¸Šå®Œæˆçš„å¯¹äº <code>webpack</code> é…ç½®çš„æ”¹é€ ï¼Œå¹¶è¿”å›æœ€ç»ˆçš„ <code>webpack</code> é…ç½®
</p><div style="margin-top:30px;"></div><p></p> <h4 id="resolvechainablewebpackconfig"><a href="#resolvechainablewebpackconfig" class="header-anchor">#</a> resolveChainableWebpackConfig</h4> <p>Resolve an intermediate chainable webpack config instance, which can be further tweaked before generating the final raw webpack config. You can call this multiple times to generate different branches of the base webpack config.
</p><div style="margin-top:30px;"></div><p></p> <h4 id="gencacheconfig"><a href="#gencacheconfig" class="header-anchor">#</a> genCacheConfig</h4> <p>Generate a cache identifier from a number of variablesï¼Œè¿”å› <code>cacheDirectory, cacheIdentifier(ä¸€ä¸ªç¼“å­˜æ ‡å¿—)</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ç”¨æ³•</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> cacheIdentifier <span class="token punctuation">}</span> <span class="token operator">=</span> api<span class="token punctuation">.</span><span class="token function">genCacheConfig</span><span class="token punctuation">(</span>
  <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token string">'eslint-loader'</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eslint-loader/package.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version<span class="token punctuation">,</span>
    eslint<span class="token operator">:</span> eslintPkg<span class="token punctuation">.</span>version
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>
    <span class="token string">'.eslintrc.js'</span><span class="token punctuation">,</span>
    <span class="token string">'.eslintrc.yaml'</span><span class="token punctuation">,</span>
    <span class="token string">'.eslintrc.yml'</span><span class="token punctuation">,</span>
    <span class="token string">'.eslintrc.json'</span><span class="token punctuation">,</span>
    <span class="token string">'.eslintrc'</span><span class="token punctuation">,</span>
    <span class="token string">'.eslintignore'</span><span class="token punctuation">,</span>
    <span class="token string">'package.json'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">)</span>

api<span class="token punctuation">.</span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">webpackConfig</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> lintOnSave <span class="token punctuation">}</span> <span class="token operator">=</span> options
  <span class="token keyword">const</span> allWarnings <span class="token operator">=</span> lintOnSave <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token operator">||</span> lintOnSave <span class="token operator">===</span> <span class="token string">'warning'</span>
  <span class="token keyword">const</span> allErrors <span class="token operator">=</span> lintOnSave <span class="token operator">===</span> <span class="token string">'error'</span>

  webpackConfig<span class="token punctuation">.</span>module
    <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">'eslint'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">pre</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>exclude
        <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'@vue/cli-service'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(vue|(j|t)sx?)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'eslint-loader'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'eslint-loader'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          extensions<span class="token punctuation">,</span>
          cache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// ä¿å­˜æ£€æµ‹ç»“æœåˆ°ç¼“å­˜ä¸­</span>
          cacheIdentifier<span class="token punctuation">,</span>  <span class="token comment">// ç¼“å­˜æ ‡ç¤º</span>
          emitWarning<span class="token operator">:</span> allWarnings<span class="token punctuation">,</span>
          <span class="token comment">// only emit errors in production mode.</span>
          emitError<span class="token operator">:</span> allErrors<span class="token punctuation">,</span>
          eslintPath<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span>
            <span class="token function">resolveModule</span><span class="token punctuation">(</span><span class="token string">'eslint/package.json'</span><span class="token punctuation">,</span> cwd<span class="token punctuation">)</span> <span class="token operator">||</span>
            <span class="token function">resolveModule</span><span class="token punctuation">(</span><span class="token string">'eslint/package.json'</span><span class="token punctuation">,</span> __dirname<span class="token punctuation">)</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          formatter<span class="token operator">:</span> <span class="token function">loadModule</span><span class="token punctuation">(</span><span class="token string">'eslint/lib/formatters/codeframe'</span><span class="token punctuation">,</span> cwd<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// åŸç†</span>
<span class="token function">genCacheConfig</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> partialIdentifier<span class="token punctuation">,</span> configFiles</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cacheDirectory <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">node_modules/.cache/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> variables <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// ä¸€äº›å˜é‡ï¼Œæ­¤å¤„çœç•¥</span>
  <span class="token keyword">const</span> cacheIdentifier <span class="token operator">=</span> <span class="token function">hash</span><span class="token punctuation">(</span>variables<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> cacheDirectory<span class="token punctuation">,</span> cacheIdentifier <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:50px;"></div> <h3 id="ğŸ”—ç›¸å…³é“¾æ¥-5"><a href="#ğŸ”—ç›¸å…³é“¾æ¥-5" class="header-anchor">#</a> ğŸ”—ç›¸å…³é“¾æ¥</h3> <ul><li><a href="https://cli.vuejs.org/dev-guide/plugin-api.html#resolvechainablewebpackconfig" target="_blank" rel="noopener noreferrer">pluginAPI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://kuangpf.com/vue-cli-analysis/cli-service/service-run.html" target="_blank" rel="noopener noreferrer">vue analysis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6844904154461126670" target="_blank" rel="noopener noreferrer">vue cliæºç æ¢ç´¢<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000016244353" target="_blank" rel="noopener noreferrer">genCacheConfig<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://forum.vuejs.org/t/chainwebpack-configurewebpack/68750" target="_blank" rel="noopener noreferrer">chainWebpackä¸configureWebpack<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://webpack.docschina.org/loaders/babel-loader/" target="_blank" rel="noopener noreferrer">cacheIdentifier<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.npmjs.com/package/eslint-loader" target="_blank" rel="noopener noreferrer">eslint-loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <div style="margin-top:100px;"></div> <h2 id="loadmodule"><a href="#loadmodule" class="header-anchor">#</a> loadmodule</h2> <p><em>loadmodule</em> å¯ä»¥ç›´æ¥è·å–åˆ°é¡¹ç›®ä¸­çš„ä¾èµ–ç‰ˆæœ¬ï¼Œå¦‚æœç›´æ¥ç”¨ <em>require</em> è·å–çš„æ˜¯ä¾èµ–ä¸­çš„å­ä¾èµ–</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> loadModule <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@vue/cli-shared-utils'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> pkg <span class="token operator">=</span> <span class="token function">loadModule</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/package.json</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> cwd<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><div style="margin-top:100px;"></div> <h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="header-anchor">#</a> é…ç½®æ–‡ä»¶</h2> <p><em>eslint</em>ã€<em>stylelint</em>ã€<em>commitlint</em>ã€<em>cz</em>ã€<em>prettier</em> ç­‰é…ç½®æ–‡ä»¶æ˜¯æˆ‘ä»¬åœ¨é™æ€åˆ†æå’Œæäº¤ä»£ç æ—¶å¸¸ç”¨çš„æ£€æµ‹å·¥å…·ï¼Œä¸‹é¢ä¸»è¦ç®€å•å¯¹æ¯”ä¸‹è¿™å‡ ç§å·¥å…·å¦‚ä½•é…ç½®</p> <h3 id="_1-eslint"><a href="#_1-eslint" class="header-anchor">#</a> 1.eslint</h3> <p>é…ç½®ä¼˜å…ˆçº§: .eslintrc.js &gt; .eslintrc.yaml &gt; .eslintrc.yml &gt; .eslintrc.json &gt; .eslintrc &gt; package.json <a href="https://eslint.bootcss.com/docs/user-guide/configuring" target="_blank" rel="noopener noreferrer">eslint config<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å¯åœ¨ <em>package.json</em> ä¸­é…ç½®:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mypackage&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;eslintConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token string">&quot;node&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;eslintIgnore&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;hello.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world.js&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœæƒ³å°† <em>eslintConfig</em> ä¾èµ–æ”¶æ•›è‡³ <em>package.json</em>ï¼Œå¯ä»¥å†™æˆå¦‚ä¸‹å½¢å¼ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;eslintConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;extends&quot;</span><span class="token operator">:</span>
    <span class="token string">&quot;./node_modules/@xxx/xxx/dist/eslint.js&quot;</span> <span class="token comment">// ä¸åŠ node_modulesæ‰¾ä¸åˆ°æ–‡ä»¶</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ³¨æ„ï¼š<em>eslintIgnore</em> å¦‚æœç›´æ¥æ”¶æ•›åˆ° <em>eslint</em> å¿…é¡»æ˜¯æ•°ç»„çš„å½¢å¼ï¼Œä¸èƒ½ä»¥åŒ…çš„å½¢å¼å±•ç¤º</p> <h3 id="_2-stylelint"><a href="#_2-stylelint" class="header-anchor">#</a> 2.stylelint</h3> <p>é…ç½®ä¼˜å…ˆçº§: package.json &gt; .stylelintrc[|.json|.yaml|.js] &gt; stylelint.config.js     <a href="https://cloud.tencent.com/developer/section/1489626" target="_blank" rel="noopener noreferrer">stylelint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å¯åœ¨ <em>package.json</em> ä¸­é…ç½®ï¼ˆæ— ignoreå­—æ®µï¼‰:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;stylelint&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
  <span class="token string">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@xxx/xxx/dist/stylelint&quot;</span> <span class="token comment">// ä¸åŠ node_moduleså¯ä»¥æ‰¾åˆ°æ–‡ä»¶</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_3-prettier"><a href="#_3-prettier" class="header-anchor">#</a> 3.prettier</h3> <p>é…ç½®ä¼˜å…ˆçº§ï¼špackage.json &gt; .prettierrc &gt; .prettierrc.json &gt; .prettierrc.yaml &gt; .prettierrc.yml &gt; .prettierrc.js &gt; .prettier.config.js &gt; .prettierrc.toml  <a href="https://jsweibo.github.io/2019/10/17/Prettier%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" target="_blank" rel="noopener noreferrer">prettier<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å¯åœ¨ <em>package.json</em> ä¸­é…ç½®ï¼ˆæ— ignoreå­—æ®µï¼‰:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@nibfe/rome-config/dist/prettier&quot;</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_4-commitlint"><a href="#_4-commitlint" class="header-anchor">#</a> 4.commitlint</h3> <p>åœ¨æ‰§è¡Œ <code>git commit</code> æ—¶è¿›è¡Œçš„æäº¤ä¿¡æ¯æ£€æµ‹ <a href="https://juejin.cn/post/6844903710112350221" target="_blank" rel="noopener noreferrer">commitlint è§„èŒƒ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://github.com/WenHaoHuang/changelog-sn" target="_blank" rel="noopener noreferrer">å®ä¾‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://zhuanlan.zhihu.com/p/69635847" target="_blank" rel="noopener noreferrer">å¦‚ä½•é…ç½® Git Commit Message<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å®‰è£…</span>
yarn add @commitlint<span class="token operator">/</span>config<span class="token operator">-</span>conventional @commitlint<span class="token operator">/</span>cli <span class="token operator">-</span><span class="token constant">D</span>

<span class="token comment">// package.jsonä¸­</span>
<span class="token string">&quot;commitlint&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@commitlint/config-conventional&quot;</span> <span class="token comment">// ã€æ ¡éªŒè§„åˆ™ã€‘ç¬¦åˆ Angularå›¢é˜Ÿè§„èŒƒ</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// åœ¨ .commitlintrc.js ä¸­</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é…ç½®æ”¶æ•›è‡³è‡ªå®šä¹‰çš„åŒ…ä¸­å†™æ³•ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;commitlint&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>&quot;<span class="token punctuation">.</span><span class="token operator">/</span>node_modules<span class="token operator">/</span>@xxx<span class="token operator">/</span>xxx<span class="token operator">/</span>dist<span class="token operator">/</span>commitlint<span class="token punctuation">.</span>jsâ€<span class="token punctuation">]</span> <span class="token comment">// å¿…é¡»æ˜¯æ•°ç»„</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_5-cz"><a href="#_5-cz" class="header-anchor">#</a> 5.cz</h3> <p>å¯ä»¥ç”¨ <em>scripts</em> å‘½ä»¤è¿›è¡Œæäº¤ä¿¡æ¯æ ¡éªŒ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;commit&quot;</span><span class="token operator">:</span> <span class="token string">&quot;git-cz&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é…ç½®</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// å®‰è£…</span>
yarn add commitizen <span class="token operator">-</span><span class="token constant">D</span>

<span class="token comment">// å¸¸è§„é€‚é…å™¨</span>
yarn add cz<span class="token operator">-</span>conventional<span class="token operator">-</span>changelog <span class="token operator">-</span><span class="token constant">D</span>

<span class="token comment">// package.json</span>
<span class="token string">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node_modules/cz-conventional-changelog&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å®šåˆ¶é€‚é…å™¨</span>
yarn add cz<span class="token operator">-</span>customizable <span class="token operator">-</span><span class="token constant">D</span>

<span class="token string">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node_modules/cz-customizable&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;cz-customizable&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;config&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node_modules/@xxx/xxx/dist/czConfig.js&quot;</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/vue/vueæºç /åŒå‘ç»‘å®š.html">
        vue æºç 
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a280ad29.js" defer></script><script src="/assets/js/2.fb79666b.js" defer></script><script src="/assets/js/40.04ca984c.js" defer></script>
  </body>
</html>
