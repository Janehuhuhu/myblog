(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{441:function(t,a,s){"use strict";s.r(a);var r=s(45),n=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"nginx镜像服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx镜像服务器"}},[t._v("#")]),t._v(" Nginx镜像服务器")]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),s("p",[t._v("直接把静态⽂件在本地硬盘创建并读取，类似于七⽜或者⼜拍这样的镜像"),s("code",[t._v("CDN")]),t._v("功能，⾸次访问会⾃动获取源站的静态图⽚等⽂件，之后的访问就是直接从缓存服务器读取，加快了速度。\n")]),s("div",{staticStyle:{"margin-top":"50px"}}),s("p"),t._v(" "),s("h3",{attrs:{id:"应用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),s("ul",[s("li",[t._v("⼤⽂件缓存策略")]),t._v(" "),s("li",[t._v("缓存时间⻓，⼀般不会删除\n"),s("div",{staticStyle:{"margin-top":"50px"}})])]),t._v(" "),s("h3",{attrs:{id:"接入方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接入方式"}},[t._v("#")]),t._v(" 接入方式")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  root html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  #指定缓存文件的保存目录\n  autoindex on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  proxy_store on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" #开启镜像服务\n  proxy_store_access user"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("rw group"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("rw all"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" #缓存本地存储⽂件的权限\n  proxy_temp_path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nginx"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" #本地临时缓存⽬录，用于存储下载过程。最终文件还是存储在html中的\n\n  #判断本地⽬录中是否有⽂件，没有就去取源\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("e $request_filename "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    proxy_pass http"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runoob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticStyle:{"margin-top":"50px"}}),t._v(" "),s("h3",{attrs:{id:"🔗相关链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#🔗相关链接"}},[t._v("#")]),t._v(" 🔗相关链接")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://blog.csdn.net/xiaoxiao_yingzi/article/details/93197397?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-5.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromMachineLearnPai2%7Edefault-5.control",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx临时缓存和永久缓存"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=n.exports}}]);