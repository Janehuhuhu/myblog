(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{404:function(t,s,a){t.exports=a.p+"assets/img/url.d4350b15.png"},445:function(t,s,a){"use strict";a.r(s);var e=a(45),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"url重写"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#url重写"}},[t._v("#")]),t._v(" URL重写")]),t._v(" "),e("hr"),t._v(" "),e("h3",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[t._v("#")]),t._v(" 介绍")]),t._v(" "),e("p",[t._v("url重写是指通过配置conf文件，以让网站的url中达到某种状态时则定向/跳转到某个规则，比如常见的伪静态、301重定向、域名变更等\n")]),e("div",{staticStyle:{"margin-top":"50px"}}),e("p"),t._v(" "),e("h3",{attrs:{id:"原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),e("p",[t._v("访问nginx服务器后给到新的资源地址，客户端再重新访问\n"),e("img",{staticStyle:{"margin-top":"20px"},attrs:{src:a(404),width:"400px"}})]),e("div",{staticStyle:{"margin-top":"50px"}}),e("p"),t._v(" "),e("h3",{attrs:{id:"接入方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#接入方法"}},[t._v("#")]),t._v(" 接入方法")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("语法")])])]),t._v(" "),e("ul",[e("li",[t._v("规则：可以是字符串或者正则来表示想匹配的目标url")]),t._v(" "),e("li",[t._v("定向路径：表示匹配到规则后要定向的路径，如果规则里有正则，则可以使用$index来表示正则里的捕获分组")]),t._v(" "),e("li",[t._v("重写类型：\n"),e("ul",[e("li",[t._v("last ：相当于Apache里德(L)标记，表示完成rewrite，浏览器地址栏URL地址不变")]),t._v(" "),e("li",[t._v("break；本条规则匹配完成后，终止匹配，不再匹配后面的规则，浏览器地址栏URL地址不变")]),t._v(" "),e("li",[t._v("redirect：返回302临时重定向，浏览器地址会显示跳转后的URL地址。对旧网址没有影响，但新网址不会有排名")]),t._v(" "),e("li",[t._v("permanent：返回301永久重定向，浏览器地址栏会显示跳转后的URL地址。新网址完全继承旧网址，旧网址的排名等完全清零")])])])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("server "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  rewrite 规则 定向路径 重写类型"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("div",{staticStyle:{"margin-top":"30px"}}),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("strong",[t._v("last标志")])])]),t._v(" "),e("p",[t._v("url重写后，马上发起一个新的请求，再次进入server块，重试location匹配，超过10次匹配不到报500错误，地址栏url不变")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("location "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  rewrite "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test1 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  rewrite "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test2 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test3 last"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  rewrite "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test3 "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test4"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nlocation "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test2 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("401")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nlocation "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test3 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("402")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nlocation "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test4 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[e("code",[t._v("http://192.168.199.328/test1")]),t._v(" 匹配到 "),e("code",[t._v("location / {}")]),t._v("后，被重写为"),e("code",[t._v("/test2")]),t._v("，顺序执行再次被重写为"),e("code",[t._v("/test3")]),t._v("，因为"),e("code",[t._v("flag")]),t._v("为"),e("code",[t._v("last")]),t._v("，所以不会继续重写为"),e("code",[t._v("/test4")]),t._v("，而是发起一次location匹配，匹配到"),e("code",[t._v("location /test3{}")]),t._v("，所以最终返回结果为402;")]),t._v(" "),e("p",[t._v("如果把"),e("code",[t._v("location /{}")]),t._v("中的"),e("code",[t._v("last")]),t._v("改为"),e("code",[t._v("break")]),t._v("，被重写为"),e("code",[t._v("/test3")]),t._v("后，不再重写为"),e("code",[t._v("/test4")]),t._v("，也不会发起"),e("code",[t._v("location")]),t._v("，最终没有可匹配的资源，返回"),e("code",[t._v("http")]),t._v("404。\n")]),e("div",{staticStyle:{"margin-top":"30px"}}),e("p"),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[e("strong",[t._v("break标志")])])]),t._v(" "),e("p",[t._v("用于停止执行rewrite模块的指令，但是其他模块不受影响")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v(" location "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$http_user_agent "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Chrome'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  rewrite "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("$ http"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cnblogs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com permanent "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("如果浏览器是"),e("code",[t._v("chrome")]),t._v("浏览器则返回403,但这里加了"),e("code",[t._v("break")]),t._v(",就不会执行"),e("code",[t._v("return 403")]),t._v("，返回默认的"),e("code",[t._v("index")]),t._v(",\n，也不会返回博客园\n")]),e("div",{staticStyle:{"margin-top":"30px"}}),e("p"),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[e("strong",[t._v("return")])])]),t._v(" "),e("p",[t._v("如果浏览器是"),e("code",[t._v("chrome")]),t._v("浏览器则返回403，其他浏览器返回博客园网址")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("location "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  root html"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  index index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html index"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("htm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$http_user_agent "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Chrome'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  rewrite "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("$ http"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cnblogs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com permanent "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("div",{staticStyle:{"margin-top":"30px"}}),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[e("strong",[t._v("if语句")])])]),t._v(" "),e("ul",[e("li",[t._v("匹配符号：\n"),e("ul",[e("li",[t._v("~区分大小写正则匹配；")]),t._v(" "),e("li",[t._v("~*不区分大小写正则匹配；")]),t._v(" "),e("li",[t._v("!~区分大小写正则不匹配；")]),t._v(" "),e("li",[t._v("!~*不区分大小写正则不匹配；")]),t._v(" "),e("li",[t._v("直接比较变量和内容时，使用=或!=")])])])]),t._v(" "),e("p",[t._v("​- 运算符：")]),t._v(" "),e("ul",[e("li",[t._v("使用“ -f”和“ !-f”运算符检查文件是否存在;")]),t._v(" "),e("li",[t._v("使用“ -d”和“ !-d”运算符检查目录是否存在;")]),t._v(" "),e("li",[t._v("使用“ -e”和“ !-e”运算符检查文件，目录或符号链接是否存在;")]),t._v(" "),e("li",[t._v("使用“ -x”和“ !-x”运算符检查可执行文件。")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("server "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  # 如果文件不存在则返回"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f $request_filename"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n  #如果浏览器是chrome浏览器则返回"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$http_user_agent "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Chrome'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    #"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" http"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cnblogs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n  # 如果请求类型不是"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),t._v("则返回"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("405")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$request_method "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("405")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n  # 如果参数中有 a"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" 则"),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("301")]),t._v("到指定域名\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$args "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v(" a"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rewrite "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v(" http"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("example"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" permanent"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("details",{staticClass:"custom-block details"},[e("summary",[t._v("内置预定义变量")]),t._v(" "),e("ul",[e("li",[t._v("$arg_PARAMETER  GET请求中变量名PARAMETER参数的值。")]),t._v(" "),e("li",[t._v("$args   这个变量等于GET请求中的参数。例如，foo=123&bar=blahblah;这个变量只可以被修改")]),t._v(" "),e("li",[t._v("$binary_remote_addr 二进制码形式的客户端地址。")]),t._v(" "),e("li",[t._v("$body_bytes_sent    传送页面的字节数")]),t._v(" "),e("li",[t._v("$content_length 请求头中的Content-length字段。")]),t._v(" "),e("li",[t._v("$content_type   请求头中的Content-Type字段。")]),t._v(" "),e("li",[t._v("$cookie_COOKIE  cookie COOKIE的值。")]),t._v(" "),e("li",[t._v("$document_root  当前请求在root指令中指定的值。")]),t._v(" "),e("li",[t._v("$document_uri   与$uri相同。")]),t._v(" "),e("li",[t._v("$host   请求中的主机头(Host)字段，如果请求中的主机头不可用或者空，则为处理请求的server名称(处理请求的server的server_name指令的值)。值为小写，不包含端口。")]),t._v(" "),e("li",[t._v("$hostname   机器名使用 gethostname系统调用的值")]),t._v(" "),e("li",[t._v("$http_HEADER    HTTP请求头中的内容，HEADER为HTTP请求中的内容转为小写，-变为_(破折号变为下划线)，例如：$http_user_agent(Uaer-Agent的值);")]),t._v(" "),e("li",[t._v("$http_user_agent ： 客户端agent信息;")]),t._v(" "),e("li",[t._v("$http_cookie ： 客户端cookie信息;")]),t._v(" "),e("li",[t._v("$sent_http_HEADER   HTTP响应头中的内容，HEADER为HTTP响应中的内容转为小写，-变为_(破折号变为下划线)，例如： $sent_http_cache_control, $sent_http_content_type…;")]),t._v(" "),e("li",[t._v('$is_args    如果$args设置，值为"?"，否则为""。')]),t._v(" "),e("li",[t._v("$limit_rate 这个变量可以限制连接速率。")]),t._v(" "),e("li",[t._v("$nginx_version  当前运行的nginx版本号。")]),t._v(" "),e("li",[t._v("$query_string   与$args相同。")]),t._v(" "),e("li",[t._v("$remote_addr    客户端的IP地址。")]),t._v(" "),e("li",[t._v("$remote_port    客户端的端口。")]),t._v(" "),e("li",[t._v("$remote_user    已经经过Auth Basic Module验证的用户名。")]),t._v(" "),e("li",[t._v("$request_filename   当前连接请求的文件路径，由root或alias指令与URI请求生成。")]),t._v(" "),e("li",[t._v("$request_body   这个变量（0.7.58+）包含请求的主要信息。在使用proxy_pass或fastcgi_pass指令的location中比较有意义。")]),t._v(" "),e("li",[t._v("$request_body_file  客户端请求主体信息的临时文件名。")]),t._v(" "),e("li",[t._v('$request_completion 如果请求成功，设为"OK"；如果请求未完成或者不是一系列请求中最后一部分则设为空。')]),t._v(" "),e("li",[t._v("$request_method 这个变量是客户端请求的动作，通常为GET或POST。包括0.8.20及之前的版本中，这个变量总为main request中的动作，如果当前请求是一个子请求，并不使用这个当前请求的动作。")]),t._v(" "),e("li",[t._v("$request_uri    这个变量等于包含一些客户端请求参数的原始URI，它无法修改，请查看$uri更改或重写URI,\n包含请求参数的原始URI，不包含主机名，如：”/foo/bar.php?arg=baz”。")]),t._v(" "),e("li",[t._v("$scheme 所用的协议，比如http或者是https，比如rewrite ^(.+)$ $scheme://example.com$1 redirect;")]),t._v(" "),e("li",[t._v("$server_addr    服务器地址，在完成一次系统调用后可以确定这个值，如果要绕开系统调用，则必须在listen中指定地址并且使用bind参数。")]),t._v(" "),e("li",[t._v("$server_name    服务器名称。")]),t._v(" "),e("li",[t._v("$server_port    请求到达服务器的端口号。")]),t._v(" "),e("li",[t._v("$server_protocol    请求使用的协议，通常是HTTP/1.0或HTTP/1.1。")]),t._v(" "),e("li",[t._v("$uri    请求中的当前URI(不带请求参数，参数位于args)，不同于浏览器传递的args)，不同于浏览器传递的args)，不同于浏览器传递的request_uri的值，它可以通过内部重定向，或者使用index指令进行修改。")])])]),t._v(" "),e("div",{staticStyle:{"margin-top":"30px"}}),t._v(" "),e("ol",{attrs:{start:"6"}},[e("li",[e("strong",[t._v("set设置变量")])])]),t._v(" "),e("p",[t._v("访问主机"),e("code",[t._v("ip")]),t._v("本来应该进入"),e("code",[t._v("http://www.cnblogs.com")]),t._v("  重写为 "),e("code",[t._v("http://www.cnblogs.com/Nicholas0707")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("location "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" $name Nicholas0707"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  rewrite "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$ http"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cnblogs"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("$name"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("div",{staticStyle:{"margin-top":"50px"}}),t._v(" "),e("h3",{attrs:{id:"🔗相关链接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#🔗相关链接"}},[t._v("#")]),t._v(" 🔗相关链接")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.cnblogs.com/Nicholas0707/p/12210551.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("URL重写介绍"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.zutuanxue.com/home/4/54_284",target:"_blank",rel:"noopener noreferrer"}},[t._v("组团学"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=n.exports}}]);